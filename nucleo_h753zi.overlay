/*
 * Device Tree Overlay for Nucleo H753ZI
 * - LSM6DSO IMU on I2C1 (Arduino connector pins D14/D15)
 * - TMC9660 motor driver on USART2 (Arduino connector pins D0/D1)
 *
 * SPDX-License-Identifier: Apache-2.0
 */

&i2c1 {
	status = "okay";
	clock-frequency = <I2C_BITRATE_FAST>;  /* 400 kHz */

	lsm6dso: lsm6dso@6a {
		compatible = "st,lsm6dso";
		reg = <0x6a>;  /* I2C address (SDO/SA0 pin low) */
		                /* Use 0x6b if SDO/SA0 pin high */

		/* Accelerometer configuration */
		accel-range = <0>;  /* ±2g (0=2g, 1=16g, 2=4g, 3=8g) */
		accel-odr = <4>;    /* 104 Hz */

		/* Gyroscope configuration */
		gyro-range = <6>;  /* ±2000 dps (0=250dps, 1=125dps, 2=500dps, 4=1000dps, 6=2000dps) */
		gyro-odr = <4>;    /* 104 Hz */
	};
};

/* USART2 for TMC9660 Motor A */
&usart2 {
	status = "okay";
	current-speed = <115200>;  /* 115200 baud (TMC9660 autobaud) */
	pinctrl-0 = <&usart2_tx_pd5 &usart2_rx_pd6>;
	pinctrl-names = "default";
};

/* USART3 for TMC9660 Motor B */
&usart3 {
	status = "okay";
	current-speed = <115200>;
	pinctrl-0 = <&usart3_tx_pd8 &usart3_rx_pd9>;
	pinctrl-names = "default";
};

/* USART6 for TMC9660 Motor C */
&usart6 {
	status = "okay";
	current-speed = <115200>;
	pinctrl-0 = <&usart6_tx_pc6 &usart6_rx_pc7>;
	pinctrl-names = "default";
};

/* Aliases for easy reference in code */
/ {
	aliases {
		tmc9660a = &usart2;  /* Motor A */
		tmc9660b = &usart3;  /* Motor B */
		tmc9660c = &usart6;  /* Motor C */
	};
};
